<template>
	<b-container fluid v-loading.fullscreen.lock="fullscreenLoading">
		<b-container>
			<div style="display: none;">
				<img src="https://inyihome.com/early_logo.png" alt="YIHOME">
			</div>
			
			<div class="form-header__banner" style="text-align: center; background-color: rgb(40, 117, 232);margin: 0 -15px;">
				<img src="~assets/images/early_bird2.jpg" alt="header image">
			</div>
			<div class="form-header__container">
				<div class="form-header__title">å…¨çƒå®šåˆ¶ç§Ÿæˆ¿åŸºæœ¬éœ€æ±‚ä¿¡æ¯ç¡®è®¤-Channel</div>
				<div class="field__description">
					<p><span><span>è¯·æ‚¨è¯´è¯´å¯¹æˆ¿æºçš„ç®€å•éœ€æ±‚ï¼Œé¡¾é—®æ¥ä¸ºæ‚¨çœ‹çœ‹é€‚åˆçš„æˆ¿æºå“¦~</span></span></p>

					<p>
						<span><span>Please tell us your rental requirements, we will
								see what we can do for you.</span></span></p>
				</div>
			</div>
			<el-form :model="ruleForm" :rules="rules" ref="ruleForm" class="early_ruleForm" label-position="top">
				<el-form-item label="ğŸ˜˜æ‚¨ä»ä»€ä¹ˆæ¸ é“äº†è§£åˆ°æˆ‘ä»¬çš„å‘¢ï¼Ÿ_How you find us?" prop="channel">
					<p class="label_info">å¯å¤šé€‰å“¦</p>
					<el-select v-model="ruleForm.channel" multiple placeholder="è¯·é€‰æ‹©">
						<el-option label="ç™¾åº¦æœç´¢" value="ç™¾åº¦æœç´¢"></el-option>
						<el-option label="è°·æ­Œæœç´¢" value="è°·æ­Œæœç´¢"></el-option>
						<el-option label="å¾®åš" value="å¾®åš"></el-option>
						<el-option label="çŸ¥ä¹" value="çŸ¥ä¹"></el-option>
						<el-option label="è±†ç“£" value="è±†ç“£"></el-option>
						<el-option label="äº¿å¿†ç½‘" value="äº¿å¿†ç½‘"></el-option>
						<el-option label="ä»Šæ—¥æ¾³æ´²" value="ä»Šæ—¥æ¾³æ´²"></el-option>
						<el-option label="å¾®ä¿¡æœ‹å‹åœˆ" value="å¾®ä¿¡æœ‹å‹åœˆ"></el-option>
						<el-option label="ä»–äººæ¨è" value="ä»–äººæ¨è"></el-option>
						<el-option label="å¾®ä¿¡ç¾¤" value="å¾®ä¿¡ç¾¤"></el-option>
						<el-option label="æ–°é—»æŠ¥é“" value="æ–°é—»æŠ¥é“"></el-option>
						<el-option label="ä»Šæ—¥å¤´æ¡" value="ä»Šæ—¥å¤´æ¡"></el-option>
						<el-option label="å…¶ä»–æ¸ é“" value="å…¶ä»–æ¸ é“"></el-option>
					</el-select>
				</el-form-item>
				
				<el-form-item label="æ±‚ç§Ÿå›½å®¶" prop="countryName">
					<p class="label_info"></p>
					<el-select v-model="ruleForm.countryName" placeholder="è¯·é€‰æ‹©">
						<el-option label="è‹±å›½" value="è‹±å›½"></el-option>
						<el-option label="ç¾å›½" value="ç¾å›½"></el-option>
						<el-option label="æ¾³æ´²" value="æ¾³æ´²"></el-option>
						
					</el-select>
				</el-form-item>
				
				<el-form-item label="1ï¸âƒ£æ±‚ç§ŸåŸå¸‚è‹±æ–‡åç§°_City" prop="city">
					<el-input v-model="ruleForm.city" maxlength="200" clearable placeholder="è¯·è¾“å…¥åŸå¸‚è‹±æ–‡åç§°"></el-input>
					<!-- <el-radio-group v-model="ruleForm.city">
						<el-radio label="å¢¨å°”æœ¬"></el-radio>
						<el-radio label="æ‚‰å°¼"></el-radio>
						<el-radio label="å¸ƒé‡Œæ–¯ç­"></el-radio>
						<el-radio label="é˜¿å¾·è±å¾·"></el-radio>
						<el-radio label="å…¶ä»–"></el-radio>
					</el-radio-group> -->
				</el-form-item>
				
				<el-form-item label="æ±‚ç§ŸåŸå¸‚ä¸­æ–‡åç§°" prop="cityEn">
					<el-input v-model="ruleForm.cityEn" maxlength="100" clearable placeholder="è¯·è¾“å…¥åŸå¸‚ä¸­æ–‡åç§°"></el-input>
					
				</el-form-item>
				
				<el-form-item label="æ±‚ç§ŸåŒºåŸŸ" prop="area">
					<p class="label_info">è¯·å¡«å†™å¸Œæœ›å…¥ä½çš„åŒºåŸŸåç§°ï¼Œå¦‚ï¼šKingsfordã€Melbourne Cityã€Caulfieldã€Bristol cityç­‰</p>
					<el-input v-model="ruleForm.area" maxlength="100" clearable></el-input>
				</el-form-item>
				<el-form-item label="2ï¸âƒ£æˆ¿å‹_Property Types" prop="propertytype">
					<p class="label_info">è¯·é€‰æ‹©è‡³å°‘ä¸€ç§æˆ¿å‹ï¼Œå¯å¤šé€‰</p>
					<el-select v-model="ruleForm.propertytype" multiple placeholder="è¯·é€‰æ‹©">
						<el-option label="å…¬å¯“_Apartment/flat" value="å…¬å¯“_Apartment"></el-option>
						<el-option label="åˆ«å¢…_House" value="åˆ«å¢…_House"></el-option>
						<!-- <el-option label="è”æ’å…¬å¯“_Townhouse" value="è”æ’å…¬å¯“_Townhouse"></el-option>
						<el-option label="å•äººå¥—æˆ¿_Studio" value="å•äººå¥—æˆ¿_Studi"></el-option>
						<el-option label="å•å…ƒæˆ¿_Unit" value="å•å…ƒæˆ¿_Unit"></el-option> -->
						<el-option label="å­¦ç”Ÿå…¬å¯“_Student Housing" value="å­¦ç”Ÿå…¬å¯“_Student Housing"></el-option>
						<el-option label="å…¶ä»–æˆ¿å‹_Other" value="å…¶ä»–æˆ¿å‹_Other"></el-option>

					</el-select>
				</el-form-item>


				<el-form-item label="3ï¸âƒ£å§å®¤æ•°ç›®_Room Number" prop="roomnumber">
					<p class="label_info">è¯·é€‰æ‹©è‡³å°‘ä¸€ç§å§å®¤æ•°ç›®ï¼Œå¯å¤šé€‰</p>
					<el-checkbox-group v-model="ruleForm.roomnumber">
						<el-checkbox label="ä¸€å®¤" name="ä¸€å®¤"></el-checkbox>
						<el-checkbox label="ä¸¤å®¤" name="ä¸¤å®¤"></el-checkbox>
						<el-checkbox label="ä¸‰å®¤" name="ä¸‰å®¤"></el-checkbox>
						<el-checkbox label="å››å®¤" name="å››å®¤"></el-checkbox>
						<el-checkbox label="äº”å®¤æˆ–ä»¥ä¸Š" name="äº”å®¤æˆ–ä»¥ä¸Š"></el-checkbox>
					</el-checkbox-group>
				</el-form-item> 

				<el-form-item label="4ï¸âƒ£å«æµ´æ•°ç›®_Bathroom Number" prop="bathroomnumber">
					<p class="label_info">è¯·é€‰æ‹©è‡³å°‘ä¸€ç§å«æµ´æ•°ç›®ï¼Œå¯å¤šé€‰</p>
					<el-checkbox-group v-model="ruleForm.bathroomnumber">
						<el-checkbox label="ä¸€å«æµ´" name="ä¸€å«æµ´"></el-checkbox>
						<el-checkbox label="ä¸¤å«æµ´" name="ä¸¤å«æµ´"></el-checkbox>
						<el-checkbox label="ä¸‰å«æµ´" name="ä¸‰å«æµ´"></el-checkbox>
						<el-checkbox label="å››å«æµ´åŠä»¥ä¸Š" name="å››å«æµ´åŠä»¥ä¸Š"></el-checkbox>
					</el-checkbox-group>
				</el-form-item> 
				
				<el-form-item label="5ï¸âƒ£æ¯å‘¨ç§Ÿé‡‘é¢„ç®—_Weekly Budget" prop="weeklybudget">
					<p class="label_info">å•ä½ï¼šå½“åœ°è´§å¸å•ä½ï¼Œè¯·å¡«å†™<span style="color: #fb5058;">å‘¨ç§Ÿé‡‘</span>æ•°ç›®ï¼Œå¯å†™ç§Ÿé‡‘åŒºé—´ï¼Œå¦‚ï¼š200ã€200-300ï¼›</p>
					<el-input v-model="ruleForm.weeklybudget" maxlength="100" clearable></el-input>
				</el-form-item>
				

				<el-form-item label="6ï¸âƒ£æœŸæœ›å…¥ä½æ—¶é—´_Expected Moing-in Date" prop="expecteddate">
					<el-date-picker v-model="ruleForm.expecteddate" :editable="false" type="date" value-format="yyyy-MM-dd" placeholder="é€‰æ‹©æ—¥æœŸ" clearable ></el-date-picker>
				</el-form-item>

				<el-form-item label="7ï¸âƒ£ã€é€‰å¡«ã€‘æ˜¯å¦éœ€è¦å®¶å…·ç”µå™¨ï¼Ÿ_Do you need Furniture?" prop="furniture">
					<el-radio-group v-model="ruleForm.furniture">
						<el-radio label="éœ€è¦_Yes"></el-radio>
						<el-radio label="ä¸éœ€è¦_No"></el-radio>
					</el-radio-group>
				</el-form-item>

				<el-form-item label="8ï¸âƒ£å¦‚ä½•è”ç³»æ‚¨ï¼Ÿï¼ˆå¯å¡«å†™å¾®ä¿¡æˆ–æ‰‹æœºå·ï¼‰_Contact" prop="contact">
					<el-input v-model="ruleForm.contact" maxlength="100" clearable></el-input>
				</el-form-item>

				<el-form-item label="9ï¸âƒ£æ‚¨çš„å§“å _Name" prop="name">
					<el-input v-model="ruleForm.name" maxlength="100" clearable></el-input>
				</el-form-item>


				<el-form-item label="ğŸ”Ÿã€é€‰å¡«ã€‘å…¶å®ƒä»»ä½•è¡¥å……è¦æ±‚_Any Note?" prop="anynote">
					<el-input type="textarea" v-model="ruleForm.anynote" maxlength="100" :autosize="{ minRows: 4, maxRows: 6}"></el-input>
				</el-form-item>
				<el-form-item class="early_btn_wrapper">
					<el-button :loading="buttonStatus" type="primary" @click="submitForm('ruleForm')">æäº¤</el-button>
				</el-form-item>
			</el-form>
		</b-container>
	</b-container>
</template>

<script>
	import $ from 'jquery';
	export default {
		layout: 'activity',
		head() {
			return {
				title: 'æ¾³æ´²å®šåˆ¶ç§Ÿæˆ¿åŸºæœ¬éœ€æ±‚ä¿¡æ¯ç¡®è®¤-Channel',
				meta: [{
						hid: 'description',
						name: 'description',
						content: 'ä¸ºæ¾³æ´²å®šåˆ¶ç§Ÿæˆ¿åŸºæœ¬éœ€æ±‚ä¿¡æ¯ç¡®è®¤-Channelæäº¤æ•°æ®ã€‚è¯·æ‚¨è¯´è¯´å¯¹æˆ¿æºçš„ç®€å•éœ€æ±‚ï¼Œé¡¾é—®æ¥ä¸ºæ‚¨çœ‹çœ‹é€‚åˆçš„æˆ¿æºå“¦~ Please tell us you...'
					},

					{
						name: 'æˆ‘çš„å§“å',
						content: 'è¿™é‡Œæ˜¯åå­—çš„å†…å®¹çš„'
					},

					{
						'property': 'og:url',
						content: 'https://www.inyihome.com/activity/early_bird'
					},
					{
						'property': 'og:type',
						content: 'webpage'
					},
					{
						'property': 'og:title',
						content: 'æ¾³æ´²å®šåˆ¶ç§Ÿæˆ¿åŸºæœ¬éœ€æ±‚ä¿¡æ¯ç¡®è®¤-Channel'
					},
					{
						'property': 'og:description',
						content: 'ä¸ºæ¾³æ´²å®šåˆ¶ç§Ÿæˆ¿åŸºæœ¬éœ€æ±‚ä¿¡æ¯ç¡®è®¤-Channelæäº¤æ•°æ®ã€‚è¯·æ‚¨è¯´è¯´å¯¹æˆ¿æºçš„ç®€å•éœ€æ±‚ï¼Œé¡¾é—®æ¥ä¸ºæ‚¨çœ‹çœ‹é€‚åˆçš„æˆ¿æºå“¦~ Please tell us you...'
					},
					{
						'property': 'og:image',
						content: 'https://inyihome.com/early_logo.png'
					},
				]
			}
		},
		data() {
			return {
				buttonStatus:false,
				fullscreenLoading:false,
				ruleForm: {
					channel: [],
					countryName:'',
					city: '',
					cityEn:'',
					area: '',
					propertytype: [],
					roomnumber: [],
					bathroomnumber: [],
					weeklybudget: '',
					expecteddate: '',
					furniture:'',
					contact:'',
					anynote:'',
					name:'',
					userid:this.$route.query.tokenId?this.$route.query.tokenId:''
				},
				rules: {
					channel:[
						{ required: true, message: 'è¯·é€‰æ‹©æ­¤é¡¹', trigger: 'change' }
					],
					countryName:[
						{ required: true, message: 'è¯·é€‰æ‹©æ±‚ç§Ÿå›½å®¶', trigger: 'change' }
					],
					city: [
						{required: true, message: 'è¯·é€‰æ‹©æ±‚ç§ŸåŸå¸‚', trigger: 'change' }
					],
					area :[
						{ required: true, message: 'è¯·å¡«å†™æ­¤é¡¹', trigger: 'blur' },
					],
					propertytype:[
						{ required: true, message: 'è¯·é€‰æ‹©æ­¤é¡¹', trigger: 'change' }
					],
					roomnumber: [
						{ type: 'array', required: true, message: 'è¯·è‡³å°‘é€‰æ‹©ä¸€é¡¹', trigger: 'change' }
					],
					bathroomnumber: [
						{ type: 'array', required: true, message: 'è¯·è‡³å°‘é€‰æ‹©ä¸€é¡¹', trigger: 'change' }
					],
					weeklybudget :[
						{ required: true, message: 'è¯·å¡«å†™æ¯å‘¨ç§Ÿé‡‘é¢„ç®—', trigger: 'blur' },
					],
					expecteddate: [
						{ required: true, message: 'è¯·é€‰æ‹©æ—¥æœŸ', trigger: 'change' }
					],
					// furniture: [
					// 	{ required: true, message: 'è¯·é€‰æ‹©æ´»åŠ¨èµ„æº', trigger: 'change' }
					// ],
					contact:[
						{ required: true, message: 'è¯·å¡«å†™æ‚¨çš„å¾®ä¿¡æˆ–æ‰‹æœºå·', trigger: 'blur' },
					],
					name:[
						{ required: true, message: 'è¯·å¡«å†™æ‚¨çš„å§“å', trigger: 'blur' },
					]
				}
			}
		},
		created() {
			console.log(this.$route.query.tokenId)
		},
		methods:{
			submitForm(formName){
				console.log(this.ruleForm)
				this.$refs[formName].validate((valid) => {
					if (valid) {
						this.buttonStatus = true;
						this.fullscreenLoading = true;
						console.log(this.ruleForm)
						this.ruleForm.channel = this.ruleForm.channel.join(',');
						this.ruleForm.propertytype = this.ruleForm.propertytype.join(',');
						this.ruleForm.roomnumber = this.ruleForm.roomnumber.join(',');
						this.ruleForm.bathroomnumber = this.ruleForm.bathroomnumber.join(',');
						
						this.$request.earlyBirdSubmit(this.ruleForm).then(res=>{
							this.buttonStatus = false;
							this.fullscreenLoading = false;
							if(res){
								this.$alert('æ•°æ®æäº¤æˆåŠŸ', 'ä¿¡æ¯', {
									confirmButtonText: 'ç¡®å®š',
									type:'success',
									callback: action => {
										window.location.href = 'https://www.inyihome.com'
									}
								});
							}else{
								this.$alert('æ•°æ®æäº¤å¤±è´¥', 'ä¿¡æ¯', {
									confirmButtonText: 'ç¡®å®š',
									type:'error',
									callback: action => {
										
									}
								});
							}
						}).catch(e=>{
							this.fullscreenLoading = false;
							this.buttonStatus = false;
							this.$alert('ç½‘ç»œé”™è¯¯ï¼Œæ•°æ®æäº¤å¤±è´¥', 'ä¿¡æ¯', {
								confirmButtonText: 'ç¡®å®š',
								type:'error',
								callback: action => {
									
								}
							});
						})
						
					} else {
						
						console.log(this.ruleForm)
						
						
						setTimeout(()=>{
							//console.log($('.is-error'))
							$('html, body').animate({
							 	scrollTop: $('.is-error').offset().top
							}, 500)
						},100)
						//console.log('error submit!!');
						return false;
					}
				});
			},
			
		}
	}
</script>

<style scoped="scoped">
	.container-fluid {
		padding: 0;
		min-height: 100%;
		background-image: url(~assets/images/early_bird_bg.png);
		background-position: top center;
		background-attachment: fixed;
		background-size: cover;
		background-repeat: no-repeat;
		padding-top: 30px;
		padding-bottom: 30px;
	}

	.container {
		max-width: 700px;
		background-color: rgb(255, 255, 255);
		border-color: rgba(255, 255, 255, 0);
		border-width: 0px;
		box-shadow: 0 2px 4px 0 rgba(0, 0, 0, .2);
	}

	.form-header__container {
		padding: 25px 30px 10px;
	}

	.form-header__title {
		font-size: 20px;
		line-height: 30px;
		font-weight: normal;
		color: rgb(4, 35, 31);
	}

	.field__description {
		word-break: break-word;
		color: #666;
		max-width: 100%;
		-overflow: auto;
	}

	.field__description p {
		color: #000080;
		font-size: 16px;
		line-height: 20px;
	}

	.early_btn_wrapper {
		padding: 28px;
		text-align: center;
	}
	.early_btn_wrapper button{
		width: 140px;
		outline: none;
		background-color: #3B44AC;
		border-color: #3B44AC;
	}
	.label_info {
		color: #3B44AC;
		font-weight: bolder;
		font-size: 14px;
		line-height: 17px;
	}
	@media only screen and (max-width: 768px) {
		.form-header__container{
			padding: 25px 0 10px;
		}
		.container-fluid{
			padding-left: 15px;
			padding-right: 15px;
		}
	}
	@media only screen and (max-width: 376px) {
		
	}
</style>
<style>
	.early_ruleForm .el-input {
		width: 320px;
	}

	.early_ruleForm .el-form-item__label {
		margin-bottom: 0;
		padding-bottom: 0;
		font-size: 14px;
		font-weight: bold;
		color: rgb(4, 35, 31);
	}
	@media only screen and (max-width: 768px) {
		.early_ruleForm .el-form-item__label{
			font-size: 13px;
		}
		.el-message-box{
			width: 344px;
		}
	}
</style>
